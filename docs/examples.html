<!DOCTYPE html>
<html>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Graph</title>
    <script src="../vendor/pixi.min.js"></script>
    <script src="../vendor/greensock-js/TweenMax.min.js"></script>
    
    <style>
      body {
        margin: 0;
        padding: 0;
      }
      .graphfellow, #other{
        width: 500px;
        height:300px;
        border:1px solid #ccc;
        display:inline-block;
      }

    </style>
  <body>
    <div id="other" data-graph-config="background-color:0xffffcc"></div>
    <div class="graphfellow" data-graph-src="example-graphs/cs1870_fa_8.2.json"></div> 
    <div class="graphfellow" data-graph-src="example-graphs/graph.json" data-graph-config="vertices.on_click:test01,tick-duration:0,vertices.text-font-size:30,vertices.is-pulse-blur:true"></div> 
    <div class="graphfellow" data-graph-src="example-graphs/graph.json"
    data-graph-config="vertices.pulse-duration:1,vertices.is_pulse_blur:true,vertices.pulse_scale:3,vertices.is_pulse_yoyo:false,background-color:0xccffcc,travellers.fill-color:0xffffff,vertices.fill-color:0xffffcc,vertices.stroke_width:8,vertices.stroke_color:0x009900,edges.is-arrow:true"></div>
    <div class="graphfellow" data-graph-src="example-graphs/gossip.json"></div>
    <div class="graphfellow" data-graph-src="example-graphs/solo.json" data-graph-config="background-color:0xffccff"></div>

    <script src="../graphfellow.js"></script>

    <script>
    
      GraphFellow.add_function("arrival", function(){
        alert("I am one of the " + this.json_type + " with payload " + this.payload.value);
      });
      GraphFellow.add_function("test01", function(){});
      GraphFellow.add_function("init", function(){
        let startv = this.get_vertex_by_id("0");
        let pulse_dur = startv.pulse_duration;
        let pulse_scale = startv.pulse_scale;
        startv.pulse_duration = 2;
        startv.pulse_scale = 2;
        this.get_vertex_by_id("0").pulse(0x00ff00);
        startv.pulse_duration = pulse_dur;
        startv.pulse_scale = pulse_scale;
      });
      
      let example_config = {
        vertices: [
          { id: "A", x: 300, y: 125 },
          { id: "B", x: 700, y: 125 },
          { id: "C", x: 700, y: 475 },
          { id: "D", x: 300, y: 475 }
        ],
        edges: [
          { from: "A", to: "B"},
          { from: "B", to: "C"},
          { from: "C", to: "D"},
          { from: "D", to: "A"},
          { from: "A", to: "C", is_bidirectional: true, journey_duration: 1.4},
          { from: "B", to: "D", is_bidirectional: true, journey_duration: 1.4}
        ],
        travellers: [
          { at_vertex: "A", radius: 20, on_arrival: "_pulse", fill_color: 0xff0000, stroke_color: 0xff0000 }
        ],
        config: {
          vertices: {
            stroke_width: 6,
            radius: 80,
            text_font_size: 60,
            has_pulse: true,
            pulse_scale: 1.1,
            is_pulse_blur: false
          },
          edges: {
            stroke_width: 6,
            arrowhead_length: 24
          },
          tick_period: 2,
          on_tick: "_send_travellers_on_all_random"
        }
      };
      GraphFellow.create_graph(document.getElementById("other"), example_config);
      
    </script>
  </body>
</html>
